<?php
/**
 * VÃ©rifier les donnÃ©es utilisateur en base
 */

echo "ðŸ” VÃ©rification des donnÃ©es utilisateur\n";
echo "=====================================\n\n";

// Inclure les dÃ©pendances
require_once __DIR__ . '/vendor/autoload.php';

try {
    // Connexion Ã  la base de donnÃ©es
    $host = 'localhost';
    $port = '8889';
    $dbname = 'exemple';
    $username = 'root';
    $password = 'root';
    
    $dsn = "mysql:host=$host;port=$port;dbname=$dbname;charset=utf8mb4";
    $pdo = new PDO($dsn, $username, $password, [
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    ]);
    
    // VÃ©rifier les donnÃ©es de l'utilisateur ID 7 (Momo)
    $stmt = $pdo->prepare("SELECT * FROM users WHERE id = 7");
    $stmt->execute();
    $user = $stmt->fetch();
    
    if ($user) {
        echo "ðŸ‘¤ DonnÃ©es de l'utilisateur ID 7 :\n";
        foreach ($user as $key => $value) {
            echo "  - $key: " . ($value ?? 'NULL') . "\n";
        }
    } else {
        echo "âŒ Utilisateur non trouvÃ©\n";
    }
    
    // VÃ©rifier les prÃ©fÃ©rences
    echo "\nðŸ“‹ PrÃ©fÃ©rences de notification :\n";
    $stmt = $pdo->prepare("SELECT * FROM notification_preferences WHERE user_id = 7");
    $stmt->execute();
    $preferences = $stmt->fetch();
    
    if ($preferences) {
        foreach ($preferences as $key => $value) {
            echo "  - $key: " . ($value ?? 'NULL') . "\n";
        }
    } else {
        echo "âŒ PrÃ©fÃ©rences non trouvÃ©es\n";
    }
    
} catch (Exception $e) {
    echo "âŒ Erreur: " . $e->getMessage() . "\n";
}

echo "\nðŸ” VÃ©rification terminÃ©e !\n";
?>
